---
layout: post
bigtitle: 'SQL을 활용한 데이터 분석'
subtitle: 함수
date: '2022-08-08 00:00:00 +0900'
categories:
    - study
    - kt-development-consortium
    - data-analysis-with-sql
comments: true
---

                                                  
# 함수

# 함수
* toc
{:toc}

## 문자 처리 함수 

| 구분          | 설명                                     |
|:------------|:---------------------------------------|
| LOWER       | 소문자로 변환한다.                             |
| UPPER       | 대문자로 변환한다.                             |
| INITCAP     | 첫 글자만 대문자로 나머지 글자는 소문자로 변환한다.          |
| CONCAT      | 문자의 값을 연결한다.                           |
| SUBSTR      | 문자를 잘라 추출한다. (한글 1Byte)                |
| SUBSTRB     | 문자를 잘라 추출한다. (한글 2Byte)                |
| LENGTH      | 문자의 길이를 반환한다. (한글 1Byte)               |
| LENGTHB     | 문자의 길이를 반환한다. (한글 2Byte)               |
| LPAD, RPAD  | 입력 받은 문자열과 기호를 정렬하여 특정 길이의 문자열로 반환한다.  |
| TRIM        | 잘라내고 남은 문자를 표시한다.                      |
| CONVERT     | CHAR SET을 변환한다.                        |
| CHR         | ASCII 코드 값으로 변환한다.                     |
| ASCII       | ASCII 코드 값을 문자로 변환한다.                  |
| REPLACE     | 문자열에서 특정 문자를 변경한다.                     |

## 숫자 함수

| 구분    | 설명                                            |
|:------|:----------------------------------------------|
| ABS   | 절대값을 구한다.                                     |
| COS   | COSINE 값을 반환한다.                               |
| EXP   | e(2.71828183...)의 n승을 반환한다.                   |
| FLOOR | 소수점 아래를 잘라낸다.(버림)                             |
| LOG   | LOG값을 반환한다.                                   |
| POWER | POWER(m, n) m의 n승을 반환한다.                      |
| SIGN  | SIGN (n) n<0 이면 -1, n=0이면 0, n>0 이면 1을 반환한다.  |
| SIN   | SINE 값을 반환한다.                                 |
| TAN   | TANGENT 값을 반환한다.                              |
| ROUND | 특정 자릿수에서 반올림 한다.                              |
| TRUNC | 특정 자릿수에서 잘라낸다.(버림)                            |
| MOD   | 입력 받은 수를 나눈 나머지 값을 반환한다.                      |

## 날짜 함수

| 구분              | 설명                                     |
|:----------------|:---------------------------------------|
| SYSDATE         | 시스템 저장된 현재 날짜를 반환한다.                   |
| MONTHS_BETWEEN  | 두 날짜 사이가 몇 개월인지를 반환한다.                 |
| ADD_MONTHS      | 특정 날짜에 개월 수를 더한다.                      |
| NEXT_DAY        | 특정 날짜에서 최초로 도래하는 인자로 받은 요일의 날짜를 반환한다.  |
| LAST_DAY        | 해당 달의 마지막 날짜를 반환한다.                    |
| ROUND           | 인자로 받은 날짜를 특정 기준으로 반올림 한다.             |
| TRUNC           | 인자로 받은 날짜를 특정 기준으로 버린다.                |


## 날짜 연산
+ 날짜 형 데이터에 숫자를 더하면(날짜+숫자) 그 날짜로부터 그 기간만큼 지난 날짜를 계산한다.
+ 날짜형 데이터에 숫자를 빼면(날짜-숫자) 그 날짜로부터 그 기간만틈 이전 날짜를 구한다.

## 날짜 연산 오류 유형
+ 날짜 데이터를 추출할 때 발생하는 에러의 대부분은 DATE 타입에 대한 잘못된 연산으로 인해 발생
+ 에러가 발생하는 대표적인 DATE 연산
  + DATE + DATE 
    + ORA-00975 : 날짜와 날짜의 계산은 할 수 없다.
  + CHAR - DATE 
    + ORA-00932 : 일괄성 없는 데이터 유형 : CHAR이(가) 필요하지만 DATE임
  + NUMBER - DATE
    + ORA-00932 : 일괄성 없는 데이터 유형 : NUMBER이(가) 필요하지만 DATE임

## 특정 기준으로 반올림하는 ROUND 함수
+ ROUND 함수는 숫자를 반올림하는 함수로 학습하였다. 하지만 이 함수에 포멧 모델을 지정하면 숫자 이외에 날짜에 대해서도 반올림을 할 수 있다.
+ 형식 : ROUND(date, format)

| 포멧 모델                                | 단위                           |
|:-------------------------------------|:-----------------------------|
| CC, SCC                              | 4자리 연도의 끝 두 글자를 기준으로 반올림     |
| SYYY, YYYY, YEAR, SYEAR, YYY, YY, Y  | 년 (7월 1일부터 반올림)              |
| DDD, D, J                            | 일을 기준                        |
| HH, HH12, HH24                       | 시를 기준                        |
| Q                                    | 한 분기의 두 번째 달의 16일을 기준으로 반올림  |
| MM, MON, MONTH, RM                   | 월 (16일을 기준으로 반올림)            |
| DAY, DY ,D                           | 한주가 시작되는 날짜                  |
| MI                                   | 분을 기준                        |
